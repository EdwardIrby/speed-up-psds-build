import { ValueOf } from '@pluralsight/ps-design-system-util'
import { names as themeNames, useTheme } from '@pluralsight/ps-design-system-theme'
import { compose, css } from 'glamor'
import React, { forwardRef } from 'react'

import stylesheet from '../css'

type DivEl = JSX.IntrinsicElements['div']
interface {{pascalCase name}}Props extends DivEl {}

const styles  = {
  {{camelCase name}}: (themeName: ValueOf<typeof themeNames>) =>
    compose(
      css(stylesheet['.psds-{{kebabCase name}}']),
      css(stylesheet[`.psds-{{kebabCase name}}.psds-theme--${themeName}`])
    )
}

const {{pascalCase name}} = forwardRef((props, forwardedRef) => {
  const { ...rest } = props
  const themeName = useTheme()

  const ref = React.useRef<HTMLDivElement>(null)
  React.useImperativeHandle(forwardedRef, () => ref.current as HTMLDivElement)

  return (
    <div
      ref={ref}
      {...styles.{{camelCase name}}(themeName)}
      {...rest}
    />
  )
})
{{pascalCase name}}.displayName = '{{pascalCase name}}'

export default {{pascalCase name}}
